{% extends "project/base_site.html" %}
{% load i18n %}
{% block title %} {% trans "Projects" %} {% endblock title %}
{% block stylesheets %}
{{ block.super }}

{% endblock stylesheets %}
{% block content %}
{% get_current_language as LANGUAGE_CODE %}

<script>
function minmax(value, min, max) 
{

    if(parseInt(value) < min ){
    	
        return 0; 
    } 
    else if(parseInt(value) > max) 
        return max; 
    else return value;
}</script>
<style>
 table.jambo_table tbody tr:hover td {
  background: none ;
    border-top: none;
    border-bottom: none;
 }
 ul.stats-overview {
   border-bottom: none;
 }
 .errorlist{ color:#fd0000; font-size:12px; }
</style>


 <div class="right_col" role="main"  >
    <div class="" >
      <div class="clearfix"></div>
      <div class="row">
 
        <div class="clearfix"></div>



        <div class="col-md-12 col-sm-12 col-xs-12">
          <div class="x_panel">
            <div class="x_title">
          
              <h2 class="text-danger">نموذج تقويم الاداء الوظيفى لشاغلى الوظائف التنفيذية(إدارية)</h2>
              <ul class="nav navbar-right panel_toolbox">
    
              </ul>
              <div class="clearfix"></div>
            </div>

            <div class="x_content">

     
    <form action="" method="post" id="myForm" class="form-horizontal form-label-left input_mask" novalidate enctype="multipart/form-data" onsubmit="sav_send.disabled = true; return true;">
     {% csrf_token %}      
  <!--  basic info  -->
  <fieldset class="fieldset_normal">
    <legend>  <h2>  <i class="fa fa-clock-o"></i>  الأول : معلومات عامة</h2></legend>
    <div class="table-responsive">
     
      
      <table id="datatable-responsive" class="table  table-bordered jambo_table ">
          <thead>
            <tr class="headings">
             <th class="column-title">الجهاز</th>
              <th class="column-title"> الإدارة</th>
               <th class="column-title">المنطقة </th>
              <th class="column-title">المدينة </th>
            </tr>
          </thead>
          <tbody>
            <tr class="odd">
              <td>الهيئة العامة للإحصاء </td>
              <td> {{ emp.deptname}}</td>
              <td> {{ emp.regon}}</td>
              <td class=" ">{{ emp.city}}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="table-responsive">
          <table id="datatable-responsive" class="table jambo_table  table-bordered">
            <thead>
              <tr class="headings">
               <th class="column-title"> الاسم رباعيا</th>
                <th class="column-title">مسمى الوظيفة </th>
                 <th class="column-title">المرتبة </th>
                <th class="column-title">الرقم </th>
                <th class="column-title">تاريخ شغلها </th>
                <th class="column-title">بداية الخدمة </th>
              </tr>
            </thead>
            <tbody>
              <tr class="odd">
                <td> {{ emp.name}}</td>
                <td > {{ emp.jobTitle}}</td>
                <td > {{ emp.jobGrad}}</td>
                <td > {{ emp.jobNo}}</td>
                <td > {{ emp.orgStartDate}}</td>
                <td > {{ emp.gvrmntStartDate}}</td>
              </tr>
            </tbody>
          </table>
        </div>

                </fieldset>

<!-- evaluation form-->
                <fieldset class="fieldset_normal col-md-6  col-sm-12 " >
                    <legend><h2> <i class="fa fa-clock-o"></i> الثانى : عناصر التقويم </h2></legend>
                
                           <div class="table-responsive">
          <table id="datatable-responsive" class="table jambo_table  table-bordered">
            <thead>
              <tr class="headings">
               <th class="column-title"> # </th>
               <th> الفئة</th>
                <th class="column-title">العنصر</th>
                <th class="column-title">الحد الأعلى للدرجات </th>
                <th class="column-title">الدرجة المعطاة </th>
              </tr>
            </thead>
            <tbody>
            {% for evItem in evItems %}
              <tr class="odd">
                <td> 
        {{ forloop.counter }}
                </td>
                <td> 
                  {% if emp.cat == "a" %}
                أ
                {% elif emp.cat == "b"  %}
               ب
                {% endif %}
                </td>
                <td> {{evItem.title}}</td>
                <td> 
                <span >
                {% if emp.cat == "a" %}
                {{ evItem.max_degree_a }}
                {% elif emp.cat == "b"  %}
                {{ evItem.max_degree_b }}
                {% endif %}
                </span>
                  </td>
                
                <td>

        
   
                 {% if evItem.id == 1%}
                 {{ form.q1.errors }}  {{ form.q1 }}
                 {% elif evItem.id == 2%}
                 {{ form.q2.errors }}  {{ form.q2 }}
                 {% elif evItem.id == 3%}
                 {{ form.q3.errors }}  {{ form.q3 }}
                 {% elif evItem.id == 4%}
                 {{ form.q4.errors }}  {{ form.q4 }}
                 {% elif evItem.id == 5%}
                 {{ form.q5.errors }}  {{ form.q5 }}
                 {% elif evItem.id == 6%}
                 {{ form.q6.errors }}  {{ form.q6 }}
                 {% elif evItem.id == 7%}
                 {{ form.q7.errors }}  {{ form.q7 }}
                 {% elif evItem.id == 8%}
                 {{ form.q8.errors }}  {{ form.q8 }}
                 {% elif evItem.id == 9%}
                 {{ form.q9.errors }}  {{ form.q9 }}
                 {% elif evItem.id == 10%}
                 {{ form.q10.errors }}  {{ form.q10 }}
                 {% elif evItem.id == 11%}
                 {{ form.q11.errors }}  {{ form.q11 }}
                 {% elif evItem.id == 12%}
                 {{ form.q12.errors }}  {{ form.q12 }}
                 {% elif evItem.id == 13%}
                 {{ form.q13.errors }}  {{ form.q13 }}
                 {% elif evItem.id == 14%}
                 {{ form.q14.errors }}  {{ form.q14 }}
                 {% elif evItem.id == 15%}
                 {{ form.q15.errors }}  {{ form.q15 }}
                 {% elif evItem.id == 16%}
                 {{ form.q16.errors }}  {{ form.q16 }}
                 {% elif evItem.id == 17%}
                 {{ form.q17.errors }}  {{ form.q17 }}
                 
                 {% elif evItem.id == 18%}
                 {{ form.q18.errors }}  {{ form.q18 }}
                 {% elif evItem.id == 19%}
                 {{ form.q19.errors }}  {{ form.q19 }}
                 {% elif evItem.id == 20%}
                 {{ form.q20.errors }}  {{ form.q20 }}
                 {% elif evItem.id == 21%}
                 {{ form.q21.errors }}  {{ form.q21 }}
                 {% elif evItem.id == 22%}
                 {{ form.q22.errors }}  {{ form.q22 }}
                 
                 {% elif evItem.id == 23%}
                 {{ form.q23.errors }}  {{ form.q23 }}
                 {% elif evItem.id == 24%}
                 {{ form.q24.errors }}  {{ form.q24 }}
                 {% elif evItem.id == 25 %}
                 {{ form.q25.errors }}  {{ form.q25 }}
                 
                 {%endif%}
                
                  </td>
            
              </tr>
            {% endfor %}
            </tbody>
          </table>
        </div>
                          
                          
                
                                </fieldset>

                                <!-- evaluation total rating-->
                <fieldset class="fieldset_normal " >
                    <legend>  <h2>  <i class="fa fa-clock-o"></i>الثالث : مجموع الدرجات والتقدير </h2></legend>
                
                    <div class="table-responsive">
                        <table id="datatable-responsive" class="table  table-bordered jambo_table ">
                          <thead>
                            <tr class="headings">
                             <th class="column-title" >درجات الاداء الوظيفى </th>
                             <th class="column-title" > درجات الصفات الشخصية </th>
                             <th class="column-title" > درجات العلاقات </th>
                             <th class="column-title" >المجموع الكلى(الدرجة النهائية)  </th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr class="odd">
                              <td > <span id='group1'>{{form.total_group1.value}}</span> </td>
                              <td > <span id='group2'>{{form.total_group2.value}}</span> </td>
                              <td > <span id='group3'>{{form.total_group3.value}}</span> </td>
                              <td >  <span id='total'>{{form.total.value}}</span> </td>
                            </tr>
                          </tbody>
                        </table>

                        <table id="datatable-responsive" class="table  table-bordered jambo_table ">
                            <thead>
                              <tr class="headings">
                               <th class="column-title">ممتاز<br>(100-90)</th>
                               <th class="column-title">جيد جدا<br>(89-80)</th>
                               <th class="column-title">جيد<br>(79-70)</th>
                               <th class="column-title">مرضى<br>(69-60)</th>
                               <th class="column-title">غير مرضى<br>(أقل من60)</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr class="odd">
                                <td > <span id="excellent"></span> </td>
                                <td > <span id="verygood"></span> </td>
                                <td > <span id="good"></span> </td>
                                <td > <span id="fair"></span> </td>
                                <td > <span id="unsatisfied"></span> </td>
                              </tr>
                            </tbody>
                          </table>
                      </div>
                
                                </fieldset>


                                                   <!-- general notes-->
                <fieldset class="fieldset_normal ">
                    <legend>  <h2>  <i class="fa fa-clock-o"></i> الرابع : ملحوظات عامة </h2></legend>
                
                             <div class="table-responsive">
                                <table id="datatable-responsive" class="table  table-bordered jambo_table ">
                                    <thead>
                                      <tr class="headings">
                                       <th class="column-title">مواطن القوة :(إنجازات او نشاطات أخرى يتميز بها ولم تشتمل عليها العناصر السابقة)</th>
                                  
                                      </tr>
                                    </thead>
                                    <tbody>
                                      <tr class="odd">
                                        <td> 
                                        {{form.strength_point}}
                                        
                                        </td>
                              
                                      </tr>
                                    </tbody>
                                  </table>

                        <table id="datatable-responsive" class="table  table-bordered jambo_table ">
                            <thead>
                              <tr class="headings">
                               <th class="column-title">مواطن الضعف :(جوانب سلبيه يتصف بها وتؤثر على عمله دون أن يكون هناك تكرار للعناصر السابقة)</th>
                          
                              </tr>
                            </thead>
                            <tbody>
                              <tr class="odd">
                                <td> 
                                  {{form.weaknesses}}  {{ form.weaknesses.errors }}
                                </td>
                      
                              </tr>
                            </tbody>
                          </table>

                          <table id="datatable-responsive" class="table  table-bordered jambo_table ">
                              <thead>
                                <tr class="headings">
                                 <th class="column-title">التوجيهات والتوصيات العامة لتطوير قدراته:(إن وجدت)</th>
                            
                                </tr>
                              </thead>
                              <tbody>
                                <tr class="odd">
                                  <td>  
                                   {{form.recommendations}} {{ form.recommendations.errors }}
                                  
                                  </td>
                        
                                </tr>
                              </tbody>
                            </table>

                            <table id="datatable-responsive" class="table  table-bordered jambo_table ">
                                <thead>
                                  <tr class="headings">
                                   <th class="column-title">رأى معد التقرير</th>
                              
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr >
                                    <td>   {{form.director_notes}} {{ form.director_notes.errors }} </td>
                          
                                  </tr>
                                  <tr >
                                      <td>  
                                       
                                          <div class="form-group">
                                              <label class="col-md-3 col-sm-3 col-xs-12 control-label"> الأسم
                                                <br>
                                                <small class="text-navy">{{ evaluation.managerid.empname }}</small>
                                              </label>
                                              <label class="col-md-3 col-sm-3 col-xs-12 control-label">الوظيفة
                                                  <br>
                                                  <small class="text-navy">{{ evaluation.managerid.jobtitle }}</small>
                                                </label>
                      
                                                <label class="col-md-3 col-sm-3 col-xs-12 control-label">التوقيع
                                                    <br>
                                                    <small class="text-navy"></small>
                                                  </label>
                      
                                                  <label class="col-md-3 col-sm-3 col-xs-12 control-label">التاريخ
                                                      <br>
                                                      <small class="text-navy"></small>
                                                    </label>
                            
                      
                                           
                                            </div>
                                      </td>
                            
                                    </tr>
                                </tbody>
                              </table>

                              <table id="datatable-responsive" class="table  table-bordered jambo_table ">
                                  <thead>
                                    <tr class="headings">
                                     <th class="column-title">ملحوظات معتمد التقرير</th>
                                
                                    </tr>
                                  </thead>
                                  <tbody>
                                    <tr >
                                      <td>  {{form.authority_notes}} {{ form.authority_notes.errors }}</td>
                            
                                    </tr>
                                    <tr >
                                        <td>  
                                         
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 col-xs-12 control-label"> الأسم
                                                  <br>
                                                 <small class="text-navy" >{{ evaluation.authorityid.empname }} </small>
                                                </label>
                                                <label class="col-md-3 col-sm-3 col-xs-12 control-label">الوظيفة
                                                    <br>
                                                    <small class="text-navy" >{{ evaluation.authorityid.jobtitle }} </small>
                                                  </label>
                        
                                                  <label class="col-md-3 col-sm-3 col-xs-12 control-label">التوقيع
                                                      <br>
                                                      <small class="text-navy"></small>
                                                    </label>
                        
                                                    <label class="col-md-3 col-sm-3 col-xs-12 control-label">التاريخ
                                                        <br>
                                                        <small class="text-navy"></small>
                                                      </label>
                              
                        
                                             
                                              </div>
                                        </td>
                              
                                      </tr>
                                  </tbody>
                                </table>
                      </div>
                       {{form.employeeid}}

                      <i class="fa fa-info-circle"></i>  <span class="text-danger">  فترة هذا التقرير من   / / /14هـ   الى   / / / 14 هـ</span>
                    
                                </fieldset>
                           
                          
                            <div class="form-group">
                           <div class="col-md-9 col-sm-9 col-xs-12 col-md-offset-3">
                           <a   class="btn btn-md btn-primary" href="{% url 'ns-project:employee-list' %}"><i class="fa fa-undo"></i> إلغاء</a>
                           <button class="btn  btn-md btn-primary" type="submit" id="save_only" name="save_only"><i class="fa fa-save"></i> حفظ</button>
                           
                           <button type="submit" class="btn   btn-md btn-success" id="save_send" name="save_send" ><i class="fa fa-send-o"></i> حفظ وإرسال</button>
                                    </div>
                                  </div>
                                  
                                     </form>
                  
               <!--   {# 
                 {% for field, errors in form.errors.items %}
    {% for error in errors %}
     {{error}}{{field}} 
    {% endfor %}  
      {% endfor %}
         #} -->
      
      
                   

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
{% endblock content %}
{% block javascripts %}

{{ block.super }}
<script>
$( document ).ready(function() {
		loadData();

		
	

	
	 function minmax(value, min, max) 
	 {
	     if(parseInt(value) < min || isNaN(parseInt(value))) {
	    	 
	         return 0; 
	     }
	     else if(parseInt(value) > max) 
	         return 100; 
	     else return value;
	 }

		
		$( ".target" ).bind('input',function() {
			loadData();
			});
	 
	});
	
	function loadData(){
		//load data 
		var q1 = parseInt($('#id_q1').val()  || 0 );
		var q2 = parseInt($('#id_q2').val()  || 0 );
		var q3 = parseInt($('#id_q3').val()  || 0 );
		var q4 = parseInt($('#id_q4').val()  || 0 );
		var q5 = parseInt($('#id_q5').val()  || 0 );
		var q6 = parseInt($('#id_q6').val()  || 0 );
		var q7 = parseInt($('#id_q7').val()  || 0 );
		var q8 = parseInt($('#id_q8').val()  || 0 );
		var q9 = parseInt($('#id_q9').val()  || 0 );
		var q10 = parseInt($('#id_q10').val()  || 0 );
		var q11 = parseInt($('#id_q11').val()  || 0 );
		var q12 = parseInt($('#id_q12').val()  || 0 );
		var q13 = parseInt($('#id_q13').val()  || 0 );
		var q14 = parseInt($('#id_q14').val()  || 0 );
		var q15 = parseInt($('#id_q15').val()  || 0 );
		var q16 = parseInt($('#id_q16').val()  || 0 );
		var q17 = parseInt($('#id_q17').val()  || 0 );
		
		var q18 = parseInt($('#id_q18').val()  || 0 );
		var q19 = parseInt($('#id_q19').val()  || 0 );
		var q20 = parseInt($('#id_q20').val()  || 0 );
		var q21 = parseInt($('#id_q21').val()  || 0 );
		var q22 = parseInt($('#id_q22').val()  || 0 );
		
		var q23 = parseInt($('#id_q23').val()  || 0 );
		var q24 = parseInt($('#id_q24').val()  || 0 );
		var q25 = parseInt($('#id_q25').val()  || 0 );
		
		//calc group 1
		 var group1=   q1+ q2 + q3+ q4+ q5+ q6+ q7+ q8+ q9+ q10+ q11+ q12+ q13+ q14+ q15+ q16+ q17 ;
		 $('#group1').html(group1) ;
		//calc group 2
		 var group2=   q18 + q19 + q20 + q21 + q22;
		 $('#group2').html(group2) ;
		//calc group 3
		 var group3=   q23 + q24 + q25 ;
		 $('#group3').html(group3) ;
		 //total
		 var total=   group1 + group2 + group3 ;
		 $('#total').html(total) ;
		 
		 //grad 
		 if  (  total <=100  &&   total >= 90  ){
			    $('#excellent').html('<i class="fa fa-check fa-3x"></i>');
	        	$('#verygood').empty() ;
	        	$('#good').empty();
	        	$('#fair').empty();
	        	$('#unsatisfied').empty();
	        	
	        }
	        else if  ( total <=89  &&  total >= 80 ){
	        	$('#excellent').empty();
	        	$('#verygood').html('<i class="fa fa-check fa-3x"></i>') ;
	        	$('#good').empty();
	        	$('#fair').empty();
	        	$('#unsatisfied').empty();
	        }
	        else if  (  total <=79  &&   total >= 70 ){
	        	$('#excellent').empty();
	        	$('#verygood').empty() ;
	        	$('#good').html('<i class="fa fa-check fa-3x"></i>');
	        	$('#fair').empty();
	        	$('#unsatisfied').empty();
	        }
	        else if  ( total <=69  &&   total >= 60 ){
	        	$('#excellent').empty();
	        	$('#verygood').empty() ;
	        	$('#good').empty();
	        	$('#fair').html('<i class="fa fa-check fa-3x"></i>');
	        	$('#unsatisfied').empty();
	        }
	        else if  ( total < 60  &&   total > 0){
	         	$('#excellent').empty();
	        	$('#verygood').empty() ;
	        	$('#good').empty();
	        	$('#fair').empty();
	        	$('#unsatisfied').html('<i class="fa fa-check fa-3x"></i>');
	        }
	        else {
	        	$('#excellent').empty();
	        	$('#verygood').empty() ;
	        	$('#good').empty();
	        	$('#fair').empty();
	        	$('#unsatisfied').empty();
	        	
	        }
		
		 
		
		 
	}
	

  </script>
{% endblock javascripts %}
